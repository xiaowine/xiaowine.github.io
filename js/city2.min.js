var site_cityUtil = function() {
    var s, o, u = {},
        a = {},
        i = null,
        h = {
            1: ["华东", [31e4, 32e4, 33e4, 34e4, 36e4]],
            2: ["华北", [11e4, 12e4, 14e4, 37e4, 13e4, 15e4]],
            3: ["华中", [43e4, 42e4, 41e4]],
            4: ["华南", [44e4, 45e4, 35e4, 46e4]],
            5: ["东北", [21e4, 22e4, 23e4]],
            6: ["西北", [61e4, 65e4, 62e4, 64e4, 63e4]],
            7: ["西南", [5e5, 53e4, 52e4, 54e4, 51e4]],
            8: ["港澳台", [81e4, 82e4, 71e4]],
            9: ["海外", [99e4]]
        },
        r = {
            1: ["A-G", [34e4, 82e4, 11e4, 5e5, 35e4, 62e4, 44e4, 45e4, 52e4]],
            2: ["H-K", [46e4, 13e4, 23e4, 41e4, 42e4, 43e4, 32e4, 36e4, 22e4]],
            3: ["L-S", [21e4, 15e4, 64e4, 63e4, 37e4, 31e4, 14e4, 61e4, 51e4]],
            4: ["T-Z", [12e4, 71e4, 65e4, 54e4, 81e4, 53e4, 33e4]],
            5: ["OS", [99e4]]
        },
        c = function c(e) {
            var t = [];
            $.each(r, function(e, n) {
                $.each(n[1], function(e, n) {
                    t.push(n + "")
                })
            });
            var n = f(t, e);
            2052 == e || 1028 == e ? s = n : o = n
        },
        l = function l(n) {
            var t = [];
            return $.ajax({
                url: Site.addRequestPrefix({
                    newPath: "/ajax",
                    oldPath: "../ajax"
                }) + "/city_h.jsp?cmd=getWafNotCk_getAllCityInfo",
                type: "POST",
                async: !1,
                success: function i(e) {
                    (e = $.parseJSON(e)).success && (2052 == n || 1028 == n ? u = e.cityInfoList : a = e.cityInfoList, t = e.cityInfoList)
                }
            }), t
        },
        f = function f(e, t) {
            var n = [];
            return $.ajax({
                url: Site.addRequestPrefix({
                    newPath: "/ajax",
                    oldPath: "../ajax"
                }) + "/city_h.jsp?cmd=getWafNotCk_getCityInfo&Lcid=" + t + "&cityCodeList=" + Fai.encodeUrl($.toJSON(e)),
                type: "POST",
                async: !1,
                success: function i(e) {
                    (e = $.parseJSON(e)).success && ($.each(e.cityInfoList, function(e, n) {
                        2052 == t || 1028 == t ? u[n.cityCode] = n.cityInfo : a[n.cityCode] = n.cityInfo
                    }), n = e.cityInfoList)
                }
            }), n
        },
        g = function g(n, e, t) {
            if (!n || isNaN(n) || n <= 0) return [];
            var i = [];
            "undefined" != typeof(i = 2052 == e || 1028 == e ? u : a)[n] && null != i[n] || ("string" != typeof n && (n += ""), f(new Array(n), e));
            var r = undefined;
            return i[n] && (r = i[n][2]), r && (0 == r.length ? "street" == t && (r = undefined) : "cityOrCounty" == t && 6 < r[0].id.length && (r = undefined)), r || $.ajax({
                url: Site.addRequestPrefix({
                    newPath: "/ajax",
                    oldPath: "../ajax"
                }) + "/city_h.jsp?cmd=getWafNotCk_cityGetChildren&type=" + t + "&Lcid=" + e + "&code=" + n,
                type: "POST",
                async: !1,
                success: function c(e) {
                    (e = $.parseJSON(e)).success ? (r = e.childList, i[n] && (i[n][2] = r), $.each(r, function(e, n) {
                        var t = [];
                        t.push(n.name), t.push(n.parentid), i[n.id] = t
                    })) : r = []
                },
                error: function l(e) {
                    r = []
                }
            }), r
        },
        d = function d(e, n) {
            n ? s = s || [] : o = o || [];
            var i = n ? s : o,
                t = n ? 2052 : 1033;
            i.length || $.ajax({
                url: Site.addRequestPrefix({
                    newPath: "/ajax",
                    oldPath: "../ajax"
                }) + "/city_h.jsp?cmd=getWafNotCk_getProvinceInfo&Lcid=" + t,
                type: "POST",
                async: !1,
                success: function l(e) {
                    if ((e = $.parseJSON(e)).success)
                        for (var n = 0, t = e.provinceInfoList.length; n < t; n++) i.push(e.provinceInfoList[n])
                }
            });
            try {
                var r = h[e][1],
                    c = [];
                return $.each(i, function(e, n) {
                    0 <= $.inArray(parseInt(n.id), r) && c.push(n)
                }), c
            } catch (u) {
                return i
            }
        },
        t = function t(e) {
            return "string" != typeof e && (e += ""), "" != u[e] && "undefined" != u[e] && null != u[e] || f(new Array(e), 2052), !(!u[e] || "1" !== u[e][1])
        },
        y = function y(e, n) {
            if ("string" != typeof e && (e += ""), "" != u[e] && "undefined" != u[e] && null != u[e] || f(new Array(e), 2052), n) {
                if ("string" != typeof n && (n += ""), "" != u[n] && "undefined" != u[n] && null != u[n] || f(new Array(n), 2052), u[e] && u[e][1] === n && t(n)) return !0
            } else if (u[e] && "1" !== u[e][1]) return !0;
            return !1
        },
        p = function p(e) {
            var n;
            if (e) return e.length <= 3 && ("市" == e.slice(e.length - 1, e.length) || "县" == e.slice(e.length - 1, e.length) || "盟" == e.slice(e.length - 1, e.length)) ? e.slice(0, e.length - 1) : "群岛的岛礁及其海域" == (n = e.slice(e.length - 9)) ? e.slice(0, e.length - 9) : "土家族苗族自治州" == (n = e.slice(e.length - 8)) || "傣族景颇族自治州" == n || "哈尼族彝族自治州" == n || "布依族苗族自治州" == n || "蒙古族藏族自治州" == n ? e.slice(0, e.length - 8) : "藏族羌族自治州" == (n = e.slice(e.length - 7)) || "壮族苗族自治州" == n || "黎族苗族自治县" == n || "苗族侗族自治州" == n ? e.slice(0, e.length - 7) : "傈僳族自治州" == (n = e.slice(e.length - 6)) || "哈萨克自治州" == n ? e.slice(0, e.length - 6) : "彝族自治州" == (n = e.slice(e.length - 5)) || "藏族自治州" == n || "白族自治州" == n || "傣族自治州" == n || "黎族自治县" == n || "回族自治州" == n || "蒙古自治州" == n ? e.slice(0, e.length - 5) : "" == (n = e.slice(e.length - 4)) ? e.slice(0, e.length - 4) : "蒙古族" == (n = e.slice(e.length - 3)) || "自治州" == n ? e.slice(0, e.length - 3) : "群岛" == (n = e.slice(e.length - 2)) || "地区" == n || "林区" == n ? e.slice(0, e.length - 2) : "市" == e.slice(e.length - 1, e.length) || "县" == e.slice(e.length - 1, e.length) || "盟" == e.slice(e.length - 1, e.length) ? e.slice(0, e.length - 1) : e
        },
        n = function n(e) {
            return d(e, !0)
        },
        m = function m(e) {
            return g(e, 2052, "cityOrCounty")
        },
        v = function v(e) {
            return g(e, 2052, "street")
        },
        I = function I(e) {
            if (!e) return {
                id: e,
                name: "",
                parentId: 0
            };
            var n = u[e];
            return n ? {
                id: e,
                name: n[0],
                parentId: n[1]
            } : ("string" != typeof e && (e += ""), (n = (f(new Array(e), 2052)[0] || {}).cityInfo) ? {
                id: e,
                name: n[0],
                parentId: n[1]
            } : {
                id: e,
                name: "",
                parentId: 0
            })
        },
        P = function P(e) {
            if (e) {
                if (3 == e.length && "省" == e.slice(e.length - 1, e.length)) return e.slice(0, e.length - 1);
                var n = e.slice(e.length - 6);
                return "维吾尔自治区" == n ? e.slice(0, e.length - 6) : "特别行政区" == (n = e.slice(e.length - 5)) || "壮族自治区" == n || "回族自治区" == n ? e.slice(0, e.length - 5) : "自治区" == (n = e.slice(e.length - 3)) ? e.slice(0, e.length - 3) : "省" == e.slice(e.length - 1, e.length) ? e.slice(0, e.length - 1) : e
            }
        },
        C = function C(e) {
            return d(e, !1)
        },
        S = function S(e) {
            return g(e, 1033, "cityOrCounty")
        },
        j = function j(e) {
            return g(e, 1033, "street")
        },
        N = function N(e) {
            if (!e) return {
                id: e,
                name: "",
                parentId: 0
            };
            var n = a[e];
            return n ? {
                id: e,
                name: n[0],
                parentId: n[1]
            } : ("string" != typeof e && (e += ""), (n = (f(new Array(e), 1033)[0] || {}).cityInfo) ? {
                id: e,
                name: n[0],
                parentId: n[1]
            } : {
                id: e,
                name: "",
                parentId: 0
            })
        },
        A = function A(e) {
            if (e) return "Special Administrative Region" == e.slice(e.length - 29, e.length) && (e = e.slice(0, e.length - 30)), "Autonomous Region" == e.slice(e.length - 17, e.length) && (e = e.slice(0, e.length - 18)), "Province" != e.slice(e.length - 8, e.length) && "province" != e.slice(e.length - 8, e.length) || (e = e.slice(0, e.length - 9)), "Zhuang" == e.slice(e.length - 6, e.length) && (e = e.slice(0, e.length - 7)), "Uygur" == e.slice(e.length - 5, e.length) && (e = e.slice(0, e.length - 6)), "Hui" == e.slice(e.length - 3, e.length) && (e = e.slice(0, e.length - 4)), e
        },
        L = function L(e) {
            if (e) return "Tibetan Autonomous Prefecture" == e.slice(e.length - 29, e.length) && (e = e.slice(0, e.length - 30)), "Li and Miao Autonomous" == e.slice(e.length - 22, e.length) && (e = e.slice(0, e.length - 23)), "Li Autonomous" == e.slice(e.length - 13, e.length) && (e = e.slice(0, e.length - 14)), "Prefecture" == e.slice(e.length - 10, e.length) && (e = e.slice(0, e.length - 11)), "Mongolian" == e.slice(e.length - 9, e.length) && (e = e.slice(0, e.length - 10)), "County" == e.slice(e.length - 6, e.length) && (e = e.slice(0, e.length - 7)), "City" == e.slice(e.length - 4, e.length) && (e = e.slice(0, e.length - 5)), e
        },
        x = function x(e, i) {
            var n = [],
                r = [];
            return n = 2052 == e || 1028 == e ? u : a, $.each(n, function(e, n) {
                var t = {};
                n[1] == i && (t.id = e, t.name = n[0], t.parentid = n[1], r.push(t))
            }), r
        },
        O = function O(e, n) {
            if (null != i) return i[n];
            i = {};
            var t = [];
            return t = 2052 == e || 1028 == e ? u : a, $.each(t, function(e, n) {
                var t = i[n[1]] || 0;
                t++, i[n[1]] = t
            }), i[n]
        };
    return {
        getAreaGroups: function e() {
            return h
        },
        getAreaGroupsPinYin: function w() {
            return r
        },
        getProvince: function E(e) {
            return n(e)
        },
        getCities: function _(e) {
            return m(e)
        },
        getCounty: function J(e) {
            return m(e)
        },
        getStreet: function R(e) {
            return v(e)
        },
        getInfo: function T(e) {
            return I(e)
        },
        simpleProvinceName: function b(t) {
            $.each(t, function(e, n) {
                t[e].name = P(t[e].name)
            })
        },
        simpleProvinceNameStr: function k(e) {
            return P(e)
        },
        simpleCityName: function q(t) {
            $.each(t, function(e, n) {
                t[e].name = p(t[e].name)
            })
        },
        simpleCityNameStr: function G(e) {
            return p(e)
        },
        simpleProvinceNameEn: function W(t) {
            $.each(t, function(e, n) {
                t[e].name = A(t[e].name)
            })
        },
        simpleCityNameEn: function U(t) {
            $.each(t, function(e, n) {
                t[e].name = L(t[e].name)
            })
        },
        simpleCityNameStrEn: function F(e) {
            return L(e)
        },
        simpleProvinceNameStrEn: function H(e) {
            return A(e)
        },
        getProvinceEn: function M(e) {
            return C(e)
        },
        getCitiesEn: function V(e) {
            return S(e)
        },
        getCountyEn: function Z(e) {
            return S(e)
        },
        getStreetEn: function K(e) {
            return j(e)
        },
        getInfoEn: function Y(e) {
            return N(e)
        },
        simpleCityListStr: function z(e) {
            if (!e || e.length <= 0) return "未添加地区";
            var i = {};
            $.each(e, function(e, n) {
                if (!(("" + n).length < 6)) {
                    var t = I(n);
                    i[t.parentId] ? i[t.parentId].count++ : i[t.parentId] = {
                        count: 1,
                        objs: []
                    }, i[t.parentId].objs.push(t)
                }
            });
            var t = [],
                r = [];
            $.each(i, function(e, n) {
                O(2052, e) == n.count ? (t.push(P(I(e).name)), t.push("、")) : $.each(n.objs, function(e, n) {
                    r.push(p(n.name)), r.push("、")
                })
            });
            var n = t.join("") + r.join("");
            return n.slice(0, n.length - 1)
        },
        isValidProvince: function B(e) {
            return t(e)
        },
        isValidCity: function D(e, n) {
            return y(e, n)
        },
        getCityList: function Q(e, n) {
            return f(e, n)
        },
        getAllCityInfo: function X(e) {
            return l(e)
        },
        initProvinces: function ee(e) {
            return c(e)
        },
        getCityFormJScache: function ne(e, n) {
            return x(e, n)
        }
    }
}();